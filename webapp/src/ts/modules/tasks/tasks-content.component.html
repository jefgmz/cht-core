<div class="content-pane right-pane">

  @if (loadingContent || loadingForm) {
    <div class="col-sm-8 item-content empty-selection">
      <div>
        <div class="loader"></div>
      </div>
    </div>
  }

  @if (!selectedTask && !loadingContent) {
    <div class="col-sm-8 item-content empty-selection">
      <div>{{'No task selected' | translate}}</div>
    </div>
  }

  @if (!loadingContent && !loadingForm && contentError) {
    <div class="col-sm-8 item-content empty-selection">
      <div>{{ errorTranslationKey | translate}}</div>
    </div>
  }

  @if (selectedTask && !form && !loadingContent && !loadingForm && !contentError) {
    <div class="col-sm-8 item-content">
      <div class="body">
        <div>
          <ul>
            <li>
              <h2>{{selectedTask.title | translateFrom:selectedTask}}</h2>
            </li>
            <li>
              <label>{{'task.date' | translate}}</label>
              <p [innerHTML]="selectedTask.date | simpleDate"></p>
            </li>
            @if (selectedTask.priority) {
              <li>
                <label>{{'task.priority' |  translate}}</label>
                <p [ngClass]="{'high-priority': selectedTask.priority === 'high', 'medium-priority': selectedTask.priority === 'medium'}">
                  <span class="priority">
                    <i class="fa fa-exclamation-triangle high-priority-icon"></i>
                    <i class="fa fa-info-circle medium-priority-icon"></i>
                  </span>
                  {{selectedTask.priorityLabel | translateFrom:selectedTask}}
                </p>
              </li>
            }
            @for (field of selectedTask.fields; track field) {
              <li>
                <label>{{field.label | translateFrom:selectedTask}}</label>
                <p>{{field.value | translateFrom:selectedTask}}</p>
              </li>
            }
            @if (selectedTask.actions.length) {
              <li class="actions">
                @for (action of selectedTask.actions; track action) {
                  <a class="btn btn-primary" (click)="performAction(action)">{{action.label | translateFrom:selectedTask}}</a>
                }
              </li>
            }
          </ul>
        </div>
      </div>
    </div>
  }

  <div class="col-sm-8 item-content" [hidden]="!selectedTask || !form || loadingForm || loadingContent || contentError">
    <div class="body">
      <mm-enketo formId="task-report" [status]="enketoStatus" (onSubmit)="save()" (onCancel)="navigationCancel()"></mm-enketo>
    </div>
  </div>
</div>
